#!/usr/bin/env ruby

unsupported = %w[addons certs db drains keys labs pg pgbackups ssl stack]

if unsupported.select{ |c| ARGV.first.start_with? c }.length > 0
  $stderr.puts " ! Slotbox does not currently support this command."
  exit 1
end

slotbox_host = ENV["SLOTBOX_HOST"] || "slotbox.es"

system <<-EOF

export HEROKU_HOST=${HEROKU_HOST:-http://#{slotbox_host}:5000/}
export HEROKU_STATUS_HOST=${HEROKU_STATUS_HOST:-"#{slotbox_host}"}
export HEROKU_SSL_VERIFY=${HEROKU_SSL_VERIFY:-"disable"}

exec heroku #{ARGV.join(" ")}

EOF